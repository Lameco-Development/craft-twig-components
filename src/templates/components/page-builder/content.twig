{# Theme #}
{% set theme = theme is defined and theme is not empty
  ? theme|json_decode
  : _globals.get('lameco.components.theme')
%}

{# Component Variables #}
{% set block = block %}

{% set sectionClass = sectionClass ?? 'bg-none' %}
{% set containerClass = containerClass ?? 'container' %}
{% set innerClass = innerClass ?? '' %}

{% set contentWrapperClass = contentWrapperClass ?? '' %}
{% set buttonWrapperClass = buttonWrapperClass ?? '' %}

{% set titleClass = titleClass is defined
  ? titleClass ~ (theme.gsapAnimations ? ' content-fade-in' : '')
  : theme.gsapAnimations ? ' content-fade-in' : ''
%}
{% set preTitleClass = preTitleClass is defined
  ? preTitleClass ~ (theme.gsapAnimations ? ' content-fade-in' : '')
  : theme.gsapAnimations ? ' content-fade-in' : ''
%}

{# Component #}
{% if block.content is not empty %}
  <section class="page-builder-block {{ sectionClass }}" data-block="{{ block.type }}">
    <div class="{{ containerClass }}">
      <div class="{{ innerClass }}">
        {% if block.preTitle is not empty %}
          <strong class="{{ preTitleClass }}">{{ block.preTitle }}</strong>
        {% endif %}

        {% if block.title is not empty %}
          <x-ui.title level="{{ block.titleLevel }}" class="{{ titleClass }}">
            {{ block.title }}
          </x-ui.title>
        {% endif %}

        {% if block.content is not empty %}
          <div
            class="{{ contentWrapperClass }}{{
            theme.gsapAnimations
              ? ' content-fade-in'
              : ''
            }} text-block"
          >
            {{ block.content|raw }}
          </div>
        {% endif %}

        {% if block.buttons is not empty %}
          <div class="{{ buttonWrapperClass }}{{ theme.gsapAnimations ? ' content-fade-in' : '' }}">
            {% for button in block.buttons|filter(
              button => ((button is instance of('verbb\\hyper\\links\\Entry')
                or button is instance of('verbb\\hyper\\links\\Custom')
                or button is instance of('verbb\\hyper\\links\\Email')
                or button is instance of('verbb\\hyper\\links\\Phone')
                or (button is instance of('verbb\\hyper\\links\\Url') and not button.isEmpty()))
                and not button.isEmpty())
                or (button.linkButton is defined and button.linkButton is not empty)
            ) %}
              {% if
                button is instance of('verbb\\hyper\\links\\Entry')
                  or button is instance of('verbb\\hyper\\links\\Custom')
                  or button is instance of('verbb\\hyper\\links\\Email')
                  or button is instance of('verbb\\hyper\\links\\Phone')
                  or (button is instance of('verbb\\hyper\\links\\Url') and not button.isEmpty()) %}
                <x-ui.button hyper="{{ button }}" type="{{ button.linkType.value }}"></x-ui.button>
              {% elseif button.linkButton is defined and button.linkButton is not empty %}
                <x-ui.button
                  link="{{ button.linkButton }}"
                  type="{{ button.linkType.value }}"
                ></x-ui.button>
              {% endif %}
            {% endfor %}
          </div>
        {% endif %}
      </div>
    </div>
  </section>
{% endif %}
