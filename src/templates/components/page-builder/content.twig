{# Get the theme  #}
{% set theme = theme is defined and theme is not empty ? theme | json_decode : _globals.get('lameco.components.theme') %}

{% set block = block %}

{% set sectionClass = sectionClass ?? 'bg-none' %}
{% set containerClass = containerClass ?? 'container' %}
{% set innerClass = innerClass ?? '' %}

{% set titleClass = titleClass ?? '' %}

{% set columnWrapperClass = columnWrapperClass ?? 'grid grid-cols-1 gap-8' ~ (block.blockColumns | length > 1 ? ' lg:grid-cols-2' : '') %}
{% set columnClass = columnClass ?? 'flex flex-col gap-4' %}
{% set columnContentClass = columnContentClass ?? '' %}
{% set columnPreTitleClass = columnPreTitleClass ?? '' %}
{% set columnTitleClass = columnTitleClass ?? '' %}
{% set columnButtonClass = columnButtonClass ?? 'flex flex-wrap gap-4' %}

{% if block.blockColumns is not empty %}
    <section class="page-builder-block {{ sectionClass }}" data-block="{{ block.type }}">
        <div class="{{ containerClass }}">
            <div class="{{ innerClass }}">
                {% if block.blockTitle is not empty %}
                    <x-ui.title level="{{ block.blockTitleLevel }}"
                                class="{{ titleClass }}">{{ block.blockTitle }}</x-ui.title>
                {% endif %}

                <div class="{{ columnWrapperClass }}">
                    {% for column in block.blockColumns %}
                        <div class="{{ columnClass }} {{ theme.fadeInAnimation ? ' content-fade-in' : '' }}">
                            <div class="{{ columnContentClass }} {{ block.blockTextAlignment.value ?? '' }} text-block">
                                {% if column.blockPreTitle is not empty %}
                                    <strong class="{{ columnPreTitleClass }} block">
                                        {{ column.blockPreTitle | raw }}
                                    </strong>
                                {% endif %}

                                {% if column.blockTitle is not empty %}
                                    <x-ui.title level="{{ column.blockTitleLevel }}" class="{{ columnTitleClass }}">{{ column.blockTitle }}</x-ui.title>
                                {% endif %}

                                {% if column.blockContent is not empty %}
                                    <div>{{ column.blockContent | raw }}</div>
                                {% endif %}
                            </div>

                            {% if column.blockButtons is not empty %}
                                <div class="{{ columnButtonClass }} {{ block.blockTextAlignment.value ?? '' }}">
                                    {% for button in column.blockButtons %}
                                        {% if not button.isEmpty() %}
                                            <x-ui.button hyper="{{ button }}"></x-ui.button>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>
{% endif %}
